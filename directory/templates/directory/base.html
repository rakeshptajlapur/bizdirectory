<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Business Directory{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ... your existing styles ... */
        
        /* Ensure navbar has proper z-index hierarchy */
        .navbar-glass {
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1030; /* Higher than dashboard sidebar (999) */
        }
        
        /* Sticky navbar should stay above everything */
        .navbar.sticky-top {
            z-index: 1030;
        }
        
        .hero-section {
            position: relative;
            overflow: hidden;
            min-height: 400px; /* Increased by 20% from 250px to 300px */
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .hero-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 0;
        }
        
        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1;
        }
        
        .container.position-relative {
            z-index: 2;
        }
        
        .search-card {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 20px;
            padding-bottom: 35px; /* Increased bottom padding to accommodate clear filters link */
        }
        
        .clear-filter {
            font-size: 0.8rem;
            text-decoration: none;
            margin-top: 5px;
            display: inline-block;
            color: #6c757d;
        }
        
        .clear-filter:hover {
            text-decoration: underline;
            color: #0d6efd;
        }
        
        @media (min-width: 1200px) {
            .container {
                max-width: 80%;
            }
        }
        
        .nav-link.btn-primary:hover {
            background-color: transparent !important;
            color: #0d6efd !important;
            border: 1px solid #0d6efd;
        }

        /* More specific selector to override Bootstrap's .nav-link */
        .navbar .nav-item .nav-link.btn.btn-primary {
            background-color: #0d6efd !important;
            color: white !important;
            border: 1px solid #0d6efd;
            padding-left: 1rem;
            padding-right: 1rem;
        }
        
        .navbar .nav-item .nav-link.btn.btn-primary:hover {
            background-color: transparent !important;
            color: #0d6efd !important;
        }
        
        /* You might also want to style the login button properly */
        .navbar .nav-item .nav-link.btn.btn-outline-primary {
            border: 1px solid #0d6efd;
            padding-left: 1rem;
            padding-right: 1rem;
        }

        /* Fix login button hover text color */
        .navbar .nav-item .nav-link.btn.btn-outline-primary:hover {
            background-color: #0d6efd !important;
            color: white !important;
            border-color: #0d6efd;
        }

        /* Category card styles */
        .category-img-wrapper {
            position: relative;
            overflow: hidden;
            height: 130px;
            border-radius: 8px 8px 0 0;
        }
        
        .category-img-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .category-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 8px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .category-card:hover .category-img-wrapper img {
            transform: scale(1.05);
        }
        
        .category-card:hover .category-overlay {
            opacity: 1;
        }

        /* Add these styles to make business cards more compact */
        .business-card {
            max-height: 380px; /* Approximately 50vh on most screens */
            transition: transform 0.2s;
        }

        .business-card:hover {
            transform: translateY(-5px);
        }

        .business-card .card-body {
            padding: 1rem;
        }

        .business-card .card-footer {
            padding: 0.5rem 1rem;
        }

        .business-card .stars i {
            font-size: 0.9rem;
        }

        .business-card h5.card-title {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .business-card .badge {
            font-size: 0.7rem;
            padding: 0.3rem 0.5rem;
        }

        .business-card .small {
            font-size: 0.75rem;
        }

        .business-card img.card-img-top {
            height: 150px;
            object-fit: cover;
        }

        .business-carousel {
            display: flex !important;
            overflow-x: auto !important;
            scroll-behavior: smooth;
            gap: 1rem;
            padding: 0.5rem 0;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .business-carousel .carousel-item {
            flex: 0 0 auto;
            width: 240px !important; /* Fixed width for each card */
            min-width: 240px !important;
            display: block !important;
            margin-right: 1rem;
        }

        /* Add these to fix carousel display */
        .business-carousel {
            display: flex !important;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding: 10px 0;
        }
        
        .business-carousel .carousel-item {
            flex: 0 0 auto;
            width: 280px !important;
            margin-right: 15px;
            display: block !important;
        }
        
        .business-carousel::-webkit-scrollbar {
            height: 6px;
        }
        
        .business-carousel::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 10px;
        }
        
        .business-card {
            height: 100%;
            transition: transform .2s;
        }
        
        .business-card:hover {
            transform: translateY(-5px);
        }

        .business-card .badge {
            font-weight: normal;
            white-space: nowrap;
            max-width: 100px;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 0.75rem;
        }

        .business-card .badge:hover {
            max-width: none;
        }

        .business-card .d-flex.flex-nowrap {
            white-space: nowrap;
            overflow: hidden;
        }

        .business-card .badge {
            font-weight: normal;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 0.75rem;
            max-width: 120px; /* Adjust based on your card width */
        }

        /* Updated footer styles - add to your <style> section */
        .footer-glass {
            background-color: #f8f9fa; /* Light grey background */
            position: relative;
            padding-top: calc(6rem + 100px); /* Increased by 100px as requested */
            box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.03);
            border-top: 1px solid rgba(0, 0, 0, 0.06);
        }

        /* Alternative cream color option */
        .footer-cream {
            background-color: #FAF9F6; /* Cream color */
            position: relative;
            padding-top: calc(6rem + 100px); /* Increased by 100px as requested */
            box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.03);
            border-top: 1px solid rgba(0, 0, 0, 0.06);
        }

        .footer-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://images.unsplash.com/photo-1477959858617-67f85cf4f1df');
            background-size: cover;
            background-position: center;
            opacity: 0.05; /* Very subtle background */
            z-index: 0;
        }

        /* Add to your existing CSS */
        .listings-hero {
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('/static/directory/images/listings-bg.jpg');
            background-size: cover;
            background-position: center;
            padding: 6rem 0 4rem;
            position: relative;
        }

        .filter-form label {
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .active-filter-badge {
            cursor: pointer;
        }

        .business-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .business-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
        }

        /* Category badge overlay on business cards */
        .category-badge {
            background-color: rgba(13, 110, 253, 0.8); /* Semi-transparent primary blue */
            color: white;
            font-size: 0.75rem;
            font-weight: 500;
            padding: 0.35rem 0.65rem;
            border-radius: 0.25rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.15);
            z-index: 2;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }

        /* Responsive adjustments for horizontal cards */
        @media (max-width: 767px) {
            .business-card .position-relative {
                height: 180px;
            }
        }

        /* Add this to your base.html CSS or listings.html block extra_css */
        /* Remove these CSS rules that are causing the gap */
        .card-img-container {
            overflow: hidden;
        }

        .card-img-wrapper {
            position: relative;
            padding-bottom: 100%; /* This is causing the fixed aspect ratio */
            height: 0;
        }

        .card-img-wrapper img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Small screen adjustments for horizontal cards */
        @media (max-width: 767.98px) {
            .card-img-wrapper {
                padding-bottom: 66.67%; /* Creates a 3:2 aspect ratio for better appearance on small screens */
            }
        }

        /* Mobile adjustments to stack the image on top */
        @media (max-width: 575.98px) {
            .business-card .row {
                flex-direction: column;
            }
            
            .business-card .col-md-4 {
                width: 100%;
            }
            
            .business-card .col-md-8 {
                width: 100%;
            }
            
            .card-img-wrapper {
                padding-bottom: 56.25%; /* 16:9 aspect ratio for top images */
            }
        }

        /* Simplified CSS for single column layout */
        .category-badge {
            background-color: rgba(13, 110, 253, 0.8);
            color: white;
            font-size: 0.75rem;
            font-weight: 500;
            padding: 0.35rem 0.65rem;
            border-radius: 0.25rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.15);
            z-index: 2;
        }

        .card-img-container {
            overflow: hidden;
        }

        .card-img-wrapper {
            position: relative;
            padding-bottom: 100%; /* Creates a 1:1 aspect ratio */
            height: 0;
        }

        .card-img-wrapper img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .business-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .business-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1) !important;
        }

        /* Add this to your CSS for clamping the description text to 2 lines */
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Enhanced Typography for Header Only */
        .navbar-brand {
            font-family: 'Poppins', sans-serif !important;
            font-weight: 800 !important;
            font-size: 1.75rem !important;
            background: linear-gradient(45deg, #0d6efd, #0dcaf0) !important;
            -webkit-background-clip: text !important;
            -webkit-text-fill-color: transparent !important;
            background-clip: text !important;
            transition: all 0.3s ease !important;
            letter-spacing: -0.02em !important;
        }
        
        .navbar-brand:hover {
            transform: scale(1.05) !important;
            -webkit-text-fill-color: transparent !important;
        }
        
        .navbar .nav-link {
            font-family: 'Inter', sans-serif !important;
            font-weight: 500 !important;
            transition: all 0.3s ease !important;
        }
        
        .navbar .nav-link:hover {
            transform: translateY(-2px) !important;
            color: #0d6efd !important;
        }
        
        .navbar .dropdown-menu {
            border-radius: 12px !important;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15) !important;
            border: none !important;
        }
        
        .navbar .dropdown-item {
            font-family: 'Inter', sans-serif !important;
            transition: all 0.3s ease !important;
        }
        
        .navbar .dropdown-item:hover {
            background: linear-gradient(45deg, rgba(13, 110, 253, 0.1), rgba(13, 202, 240, 0.05)) !important;
            color: #0d6efd !important;
            transform: translateX(5px) !important;
        }
        
        /* Mobile Navigation Overlay */
        .mobile-nav-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 9998;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .mobile-nav-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .mobile-nav-container {
            position: fixed;
            top: 0;
            right: -100%;
            width: 350px;
            max-width: 85vw;
            height: 100%;
            background: white;
            z-index: 9999;
            transition: right 0.4s ease;
            overflow-y: auto;
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.2);
        }
        
        .mobile-nav-container.show {
            right: 0;
        }
        
        .mobile-nav-header {
            background: linear-gradient(45deg, #0d6efd, #0dcaf0);
            color: white;
            padding: 2rem 1.5rem 1.5rem;
            position: relative;
        }
        
        .mobile-nav-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .mobile-nav-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }
        
        .mobile-nav-links {
            padding: 1.5rem 0;
        }
        
        .mobile-nav-link {
            display: block;
            padding: 1rem 1.5rem;
            color: #2c3e50;
            text-decoration: none;
            font-weight: 500;
            font-family: 'Inter', sans-serif;
            border-bottom: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .mobile-nav-link:hover {
            color: #0d6efd;
            background: rgba(13, 110, 253, 0.05);
            padding-left: 2rem;
            text-decoration: none;
        }
        
        .mobile-nav-buttons {
            padding: 1.5rem;
            border-top: 2px solid #e9ecef;
        }
        
        .mobile-nav-buttons .btn {
            width: 100%;
            margin-bottom: 0.75rem;
            border-radius: 12px;
            padding: 0.75rem;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
        }
        
        .mobile-nav-toggle {
            background: linear-gradient(45deg, #0d6efd, #0dcaf0);
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 12px;
            color: white;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(13, 110, 253, 0.3);
            cursor: pointer;
        }
        
        .mobile-nav-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(13, 110, 253, 0.4);
        }
        
        /* Hide mobile nav elements on desktop */
        @media (min-width: 992px) {
            .mobile-nav-toggle,
            .mobile-nav-overlay,
            .mobile-nav-container {
                display: none !important;
            }
        }

        /* Universal Sticky CTA Styles */
        .sticky-cta-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            padding: 0.75rem 1rem;
            z-index: 1020;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            display: none; /* Hidden by default */
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Show sticky CTA only on mobile and tablet */
        @media (max-width: 991.98px) {
            .sticky-cta-bottom {
                display: block !important;
            }
            
            /* Add bottom padding to body to prevent content overlap */
            body {
                padding-bottom: 80px;
            }
            
            /* Ensure CTAs don't interfere with business detail sticky buttons */
            .business-detail-page .sticky-cta-bottom {
                display: none !important;
            }
        }

        /* Hide on desktop for cleaner experience */
        @media (min-width: 992px) {
            .sticky-cta-bottom {
                display: none !important;
            }
            
            body {
                padding-bottom: 0;
            }
        }

        /* Elegant button styling for sticky CTAs */
        .sticky-cta-bottom .btn {
            font-size: 0.85rem;
            font-weight: 500;
            padding: 0.65rem 0.5rem;
            border-radius: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            transition: all 0.2s ease;
            font-family: 'Inter', sans-serif;
        }

        .sticky-cta-bottom .btn i {
            font-size: 0.9rem;
        }

        .sticky-cta-bottom .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        /* Primary button styling */
        .sticky-cta-bottom .btn-primary {
            background: linear-gradient(45deg, #0d6efd, #0dcaf0);
            border: none;
            color: white;
        }

        .sticky-cta-bottom .btn-primary:hover {
            background: linear-gradient(45deg, #0b5ed7, #0aa2c0);
        }

        /* Outline button styling */
        .sticky-cta-bottom .btn-outline-primary {
            border: 1px solid #0d6efd;
            color: #0d6efd;
            background: rgba(255, 255, 255, 0.9);
        }

        .sticky-cta-bottom .btn-outline-primary:hover {
            background: #0d6efd;
            color: white;
        }

        /* Success button styling */
        .sticky-cta-bottom .btn-success {
            background: linear-gradient(45deg, #198754, #20c997);
            border: none;
            color: white;
        }

        /* Warning button styling */
        .sticky-cta-bottom .btn-warning {
            background: #ffc107;
            border: none;
            color: #000;
        }

        /* Extra small screens - adjust button size */
        @media (max-width: 575.98px) {
            .sticky-cta-bottom .btn {
                font-size: 0.8rem;
                padding: 0.6rem 0.4rem;
            }
            
            .sticky-cta-bottom .btn span {
                font-size: 0.75rem;
            }
            
            .sticky-cta-bottom .btn i {
                font-size: 0.8rem;
            }
        }

        /* Add smooth hide/show on scroll (optional) */
        .sticky-cta-hidden {
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        
        /* Modern Footer Styles */
.modern-footer {
    background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
    border-top: 1px solid #e9ecef;
    margin-top: auto;
}

.footer-brand .brand-name {
    font-family: 'Poppins', sans-serif;
    font-weight: 700;
    color: #212529;
    margin-bottom: 1rem;
    font-size: 1.5rem;
}

.footer-brand .brand-description {
    color: #6c757d;
    font-size: 0.95rem;
    line-height: 1.6;
    margin-bottom: 1.5rem;
}

.footer-title {
    font-weight: 600;
    color: #212529;
    margin-bottom: 1.25rem;
    font-size: 1.1rem;
    position: relative;
}

.footer-title::after {
    content: '';
    position: absolute;
    bottom: -0.5rem;
    left: 0;
    width: 30px;
    height: 2px;
    background: linear-gradient(45deg, #0d6efd, #0dcaf0);
    border-radius: 1px;
}

.footer-links {
    list-style: none;
    padding: 0;
    margin: 0;
}

.footer-links li {
    margin-bottom: 0.75rem;
}

.footer-links a {
    color: #6c757d;
    text-decoration: none;
    font-size: 0.9rem;
    transition: all 0.3s ease;
    position: relative;
}

.footer-links a:hover {
    color: #0d6efd;
    transform: translateX(5px);
}

.footer-links a::before {
    content: '';
    position: absolute;
    left: -15px;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 2px;
    background: #0d6efd;
    transition: width 0.3s ease;
}

.footer-links a:hover::before {
    width: 10px;
}

/* Social Links */
.social-links {
    display: flex;
    gap: 0.75rem;
    margin-top: 1rem;
}

.social-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: #f8f9fa;
    color: #6c757d;
    border-radius: 50%;
    text-decoration: none;
    transition: all 0.3s ease;
    font-size: 1.1rem;
}

.social-link:hover {
    background: linear-gradient(45deg, #0d6efd, #0dcaf0);
    color: white;
    transform: translateY(-3px);
    box-shadow: 0 8px 15px rgba(13, 110, 253, 0.3);
}

/* Support Buttons */
.support-buttons {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.support-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    text-decoration: none;
    font-size: 0.85rem;
    font-weight: 500;
    transition: all 0.3s ease;
    border: 1px solid transparent;
}

.whatsapp-btn {
    background: #25d366;
    color: white;
}

.whatsapp-btn:hover {
    background: #1ebe5c;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
}

.email-btn {
    background: #f8f9fa;
    color: #0d6efd;
    border-color: #0d6efd;
}

.email-btn:hover {
    background: #0d6efd;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(13, 110, 253, 0.3);
}

.contact-text {
    color: #6c757d;
    font-size: 0.85rem;
    margin: 0;
}

/* Footer Bottom */
.footer-bottom {
    border-top: 1px solid #e9ecef;
    padding: 1.5rem 0;
}

.copyright {
    color: #6c757d;
    font-size: 0.85rem;
    margin: 0;
}

.tagline {
    color: #6c757d;
    font-size: 0.85rem;
    margin: 0;
    font-style: italic;
}

/* Mobile Responsive */
@media (max-width: 767.98px) {
    .modern-footer {
        padding-bottom: 80px; /* Account for sticky mobile CTA */
    }
    
    .footer-brand .brand-name {
        font-size: 1.3rem;
    }
    
    .footer-brand .brand-description {
        font-size: 0.9rem;
    }
    
    /* FIX: Better mobile support button layout */
    .support-buttons {
        flex-direction: column; /* CHANGE FROM row to column */
        gap: 0.75rem; /* INCREASE gap */
    }
    
    .support-btn {
        width: 100%; /* FULL WIDTH */
        justify-content: center; /* CENTER content */
        font-size: 0.85rem; /* LARGER font */
        padding: 0.6rem 1rem; /* MORE padding */
        text-align: center;
    }
    
    .footer-bottom .row > div {
        text-align: center !important;
        margin-bottom: 0.5rem;
    }
    
    .social-links {
        justify-content: center;
    }
}

/* Desktop spacing optimization */
@media (min-width: 992px) {
    .modern-footer .row.g-4 {
        --bs-gutter-y: 2rem;
    }
}
        /* Your existing styles continue below - DON'T CHANGE ANYTHING ELSE */
    </style>
    {% block extra_css %}
    <style>
        /* Compact business cards */
        .business-card {
            max-height: 330px;
            transition: transform 0.2s;
        }
        
        .business-card:hover {
            transform: translateY(-5px);
        }
        
        /* Carousel styles */
        .business-carousel {
            display: flex;
            overflow-x: auto;
            scroll-behavior: smooth;
            gap: 1rem;
            padding: 0.5rem 0;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .business-carousel::-webkit-scrollbar {
            display: none;
        }
        
        .business-carousel .carousel-item {
            flex: 0 0 auto;
            width: calc(25% - 0.75rem);
            min-width: 250px;
            display: block !important;
        }
        
        .business-card {
            height: 100%;
        }
        
        .carousel-control {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background-color: white;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
        }
        
        .carousel-control-prev {
            left: -15px;
        }
        
        .carousel-control-next {
            right: -15px;
        }
        
        /* Responsive adjustments */
        @media (max-width: 992px) {
            .business-carousel .carousel-item {
                width: calc(33.333% - 0.67rem);
            }
        }
        
        @media (max-width: 768px) {
            .business-carousel .carousel-item {
                width: calc(50% - 0.5rem);
            }
        }
        
        @media (max-width: 576px) {
            .business-carousel .carousel-item {
                width: 100%;
            }
        }
        
        /* Carousel controls */
        .carousel-control {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background-color: white;
            border: 1px solid #dee2e6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0.8;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .carousel-control:hover {
            opacity: 1;
        }
        
        .carousel-control-prev {
            left: -15px;
        }
        
        .carousel-control-next {
            right: -15px;
        }
    </style>
    {% endblock %}
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light navbar-glass sticky-top py-3">
        <div class="container">
            <a class="navbar-brand fw-bold" href="{% url 'directory:home' %}">
                <i class="bi bi-building"></i> FindNearBiz
            </a>
            <button class="mobile-nav-toggle d-lg-none" type="button" id="mobileNavToggle">
                <i class="bi bi-list"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'directory:home' %}"><i class="bi bi-house"></i> Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'directory:listings' %}"><i class="bi bi-grid"></i> All Listings</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'directory:add_listings_info' %}"><i class="bi bi-plus-circle"></i> Add Listing</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'directory:refer_earn' %}"><i class="bi bi-people"></i> Refer & Earn</a>
                    </li>
                    
                    <!-- Auth links properly within navbar-nav -->
                    {% if user.is_authenticated %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="bi bi-person-circle me-1"></i>{{ user.first_name|default:user.username }}
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="{% url 'directory:dashboard_home' %}">Dashboard</a></li>
                                <li><a class="dropdown-item" href="{% url 'accounts:profile' %}">Profile</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li>
                                    <form method="post" action="{% url 'account_logout' %}" style="display: inline;">
                                        {% csrf_token %}
                                        <button type="submit" class="dropdown-item border-0 bg-transparent text-danger" style="cursor: pointer;">
                                            <i class="bi bi-box-arrow-right me-2"></i>Logout
                                        </button>
                                    </form>
                                </li>
                            </ul>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'account_login' %}">
                                <i class="bi bi-box-arrow-in-right me-1"></i>Log In
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="btn btn-primary ms-2" href="{% url 'account_signup' %}">
                                <i class="bi bi-person-plus me-1"></i>Sign Up
                            </a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Mobile Navigation Overlay -->
    <div class="mobile-nav-overlay" id="mobileNavOverlay"></div>

    <!-- Mobile Navigation Container -->
    <div class="mobile-nav-container" id="mobileNavContainer">
        <!-- Mobile Nav Header -->
        <div class="mobile-nav-header">
            <button class="mobile-nav-close" id="mobileNavClose">
                <i class="bi bi-x"></i>
            </button>
            <h5 class="mb-0" style="font-family: 'Poppins', sans-serif; font-weight: 800;">
                <i class="bi bi-building me-2"></i>FindNearBiz
            </h5>
            <p class="mb-0 small opacity-75">Your Local Business Hub</p>
        </div>
        
        <!-- Mobile Nav Links -->
        <div class="mobile-nav-links">
            <a href="{% url 'directory:home' %}" class="mobile-nav-link">
                <i class="bi bi-house me-2"></i>Home
            </a>
            <a href="{% url 'directory:listings' %}" class="mobile-nav-link">
                <i class="bi bi-grid me-2"></i>All Listings
            </a>
            <a href="{% url 'directory:add_listings_info' %}" class="mobile-nav-link">
                <i class="bi bi-plus-circle me-2"></i>Add Listing
            </a>
            <a href="{% url 'directory:refer_earn' %}" class="mobile-nav-link">
                <i class="bi bi-people me-2"></i>Refer & Earn
            </a>
            
            {% if user.is_authenticated %}
                <a href="{% url 'directory:dashboard_home' %}" class="mobile-nav-link">
                    <i class="bi bi-speedometer2 me-2"></i>Dashboard
                </a>
                <a href="{% url 'accounts:profile' %}" class="mobile-nav-link">
                    <i class="bi bi-person me-2"></i>Profile Settings
                </a>
            {% endif %}
        </div>
        
        <!-- Mobile Nav Buttons -->
        <div class="mobile-nav-buttons">
            {% if user.is_authenticated %}
                <div class="text-center mb-3">
                    <small class="text-muted">Welcome back, {{ user.get_full_name|default:user.username }}!</small>
                </div>
                <form method="post" action="{% url 'account_logout' %}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-danger">
                        <i class="bi bi-box-arrow-right me-2"></i>Logout
                    </button>
                </form>
            {% else %}
                <a href="{% url 'account_login' %}" class="btn btn-outline-primary">
                    <i class="bi bi-box-arrow-in-right me-2"></i>Login
                </a>
                <a href="{% url 'account_signup' %}" class="btn btn-primary">
                    <i class="bi bi-person-plus me-2"></i>Sign Up Free
                </a>
            {% endif %}
        </div>
    </div>

    {% block hero %}{% endblock %}

    <!-- Add this where you want messages to appear, usually at the top of content -->
    {% if messages %}
    <div class="container mt-3">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="container py-4">
        {% block content %}{% endblock %}
    </div>

    <!-- Modern Footer -->
<footer class="modern-footer">
    <div class="container">
        <!-- Main Footer Content -->
        <div class="row g-4 py-5">
            <!-- Company Info -->
            <div class="col-lg-4 col-md-6">
                <div class="footer-brand">
                    <h4 class="brand-name">
                        <i class="bi bi-building me-2"></i>FindNearBiz
                    </h4>
                    <p class="brand-description">
                        Connecting local businesses with customers. Discover trusted services, read verified reviews, 
                        and support small businesses in your community.
                    </p>
                    <div class="social-links">
                        <a href="https://www.facebook.com/Findnearbiz" class="social-link" aria-label="Facebook">
                            <i class="bi bi-facebook"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Twitter">
                            <i class="bi bi-twitter-x"></i>
                        </a>
                        <a href="https://www.instagram.com/findnearbiz" class="social-link" aria-label="Instagram">
                            <i class="bi bi-instagram"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="LinkedIn">
                            <i class="bi bi-linkedin"></i>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="col-lg-2 col-md-3 col-6">
                <h5 class="footer-title">Explore</h5>
                <ul class="footer-links">
                    <li><a href="{% url 'directory:home' %}">Home</a></li>
                    <li><a href="{% url 'directory:listings' %}">All Listings</a></li>
                    <li><a href="{% url 'directory:categories' %}">Categories</a></li>
                    <li><a href="{% url 'directory:about' %}">About Us</a></li>
                </ul>
            </div>

            <!-- Business Links -->
            <div class="col-lg-2 col-md-3 col-6">
                <h5 class="footer-title">For Business</h5>
                <ul class="footer-links">
                    <li><a href="{% url 'directory:add_listings_info' %}">Add Listing</a></li>
                    <li><a href="{% url 'directory:subscription_plans' %}">Pricing</a></li>
                    {% if user.is_authenticated and user.profile.is_business_owner %}
                        <li><a href="{% url 'directory:dashboard_home' %}">Dashboard</a></li>
                    {% endif %}
                    {% if 'affiliate' in INSTALLED_APPS %}
                        <li><a href="{% url 'affiliate:apply' %}">Become Partner</a></li>
                    {% endif %}
                </ul>
            </div>

            <!-- Support & Legal -->
            <div class="col-lg-2 col-md-6 col-6">
                <h5 class="footer-title">Support</h5>
                <ul class="footer-links">
                    <li><a href="{% url 'directory:contact' %}">Contact Us</a></li>
                    <li><a href="{% url 'directory:privacy' %}">Privacy Policy</a></li>
                    <li><a href="{% url 'directory:terms' %}">Terms of Service</a></li>
                    <li><a href="{% url 'directory:refund_policy' %}">Refund Policy</a></li>
                </ul>
            </div>

            <!-- Contact & CTA -->
            <div class="col-lg-2 col-md-6 col-6">
                <h5 class="footer-title">Get Support</h5>
                <div class="support-buttons">
                    <a href="https://wa.me/917483508433?text=Hi%20FindNearBiz%20team,%20I%20need%20help%20with..." class="support-btn whatsapp-btn" target="_blank">
                        <i class="bi bi-whatsapp me-2"></i>WhatsApp
                    </a>
                    <a href="mailto:support@bizdirectory.com" class="support-btn email-btn">
                        <i class="bi bi-envelope me-2"></i>Email Us
                    </a>
                </div>
                <p class="contact-text">
                    <i class="bi bi-geo-alt me-1"></i>
                    Bengaluru, KA, India
                </p>
            </div>
        </div>

        <!-- Footer Bottom -->
        <div class="footer-bottom">
            <div class="row align-items-center">
                <div class="col-md-12">
                    <p class="copyright">&copy; 2025 FindNearBiz.com . All rights reserved. |  <a href="https://codesiddhi.agency" class="">
                        Developed & Maintained by Codesiddhi.Agency</a></p>
                </div>
            </div>
        </div>
    </div>
</footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <script>
// Fixed Mobile navigation functionality - No server errors
document.addEventListener('DOMContentLoaded', function() {
    // Get elements with proper error handling
    const mobileNavToggle = document.getElementById('mobileNavToggle');
    const mobileNavOverlay = document.getElementById('mobileNavOverlay');
    const mobileNavContainer = document.getElementById('mobileNavContainer');
    const mobileNavClose = document.getElementById('mobileNavClose');
    
    // Only proceed if elements exist
    if (!mobileNavToggle || !mobileNavOverlay || !mobileNavContainer || !mobileNavClose) {
        console.log('Mobile nav elements not found - skipping mobile nav setup');
        return;
    }
    
    // Function to open mobile nav
    function openMobileNav() {
        try {
            mobileNavOverlay.classList.add('show');
            mobileNavContainer.classList.add('show');
            document.body.style.overflow = 'hidden';
        } catch (error) {
            console.log('Error opening mobile nav:', error);
        }
    }
    
    // Function to close mobile nav
    function closeMobileNav() {
        try {
            mobileNavOverlay.classList.remove('show');
            mobileNavContainer.classList.remove('show');
            document.body.style.overflow = 'auto';
        } catch (error) {
            console.log('Error closing mobile nav:', error);
        }
    }
    
    // Add event listeners with error handling
    try {
        mobileNavToggle.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            openMobileNav();
        });
        
        mobileNavClose.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            closeMobileNav();
        });
        
        mobileNavOverlay.addEventListener('click', function(e) {
            if (e.target === mobileNavOverlay) {
                closeMobileNav();
            }
        });
        
        // Close mobile nav when clicking on navigation links
        const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
        mobileNavLinks.forEach(function(link) {
            link.addEventListener('click', function() {
                closeMobileNav();
            });
        });
        
        // Close on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' || e.keyCode === 27) {
                closeMobileNav();
            }
        });
        
        console.log('Mobile navigation initialized successfully');
        
    } catch (error) {
        console.log('Error setting up mobile nav event listeners:', error);
    }
});

// Enhanced navbar scroll effect (existing code - keep this)
window.addEventListener('scroll', function() {
    const navbar = document.getElementById('mainNavbar');
    if (navbar) {
        if (window.scrollY > 50) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    }
});

// Keep your existing carousel code here...
$(document).ready(function() {
    // Your existing jQuery code for carousels etc.
    $('.business-category-section').each(function() {
        const $carousel = $(this).find('.business-carousel');
        const $prevBtn = $(this).find('.carousel-control-prev');
        const $nextBtn = $(this).find('.carousel-control-next');
        
        if ($carousel.length && $carousel.find('.carousel-item').length > 0) {
            const itemWidth = $carousel.find('.carousel-item:first').outerWidth(true);
            const visibleItems = Math.floor($carousel.width() / itemWidth);
            
            // Next button click
            $nextBtn.on('click', function() {
                $carousel.animate({
                    scrollLeft: '+=' + (itemWidth * visibleItems)
                }, 300);
            });
            
            // Previous button click
            $prevBtn.on('click', function() {
                $carousel.animate({
                    scrollLeft: '-=' + (itemWidth * visibleItems)
                }, 300);
            });
        }
    });
});
    </script>
    {% block extra_js %}
    <script>
        $(document).ready(function() {
            // Setup each carousel
            $('.business-category-section').each(function() {
                const $carousel = $(this).find('.business-carousel');
                const $prevBtn = $(this).find('.carousel-control-prev');
                const $nextBtn = $(this).find('.carousel-control-next');
                
                const itemWidth = $carousel.find('.carousel-item:first').outerWidth(true);
                const visibleItems = Math.floor($carousel.width() / itemWidth);
                
                // Next button click
                $nextBtn.on('click', function() {
                    $carousel.animate({
                        scrollLeft: '+=' + (itemWidth * visibleItems)
                    }, 300);
                });
                
                // Previous button click
                $prevBtn.on('click', function() {
                    $carousel.animate({
                        scrollLeft: '-=' + (itemWidth * visibleItems)
                    }, 300);
                });
            });
        });
    </script>
    {% endblock %}
</body>
</html>