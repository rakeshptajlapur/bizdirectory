{% extends 'directory/base.html' %}
{% load static %}

{% block title %}Refer & Earn - Unlimited Income Potential | BizDirectory{% endblock %}

{% block hero %}
<div class="hero-section" style="min-height: 500px;">
    <!-- Video Background -->
    <div class="video-background">
        <video autoplay muted loop class="hero-video">
            <source src="{% static 'directory/videos/hero-background.mp4' %}" type="video/mp4">
        </video>
    </div>
    <div class="hero-overlay"></div>
    
    <div class="container position-relative py-5 text-center">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <h1 class="display-4 text-white fw-bold mb-3">Refer & Earn Unlimited Income</h1>
                <p class="lead text-white mb-4">Earn 20% commission on every premium business referral - No limits, No caps!</p>
                {% if user.is_authenticated %}
                    {% if user.affiliate_profile %}
                        {% if user.affiliate_profile.status == 'approved' %}
                            <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center align-items-center">
                                <a href="{% url 'affiliate:dashboard' %}" class="btn btn-success btn-lg px-5 py-3">View Affiliate Dashboard</a>
                            </div>
                        {% elif user.affiliate_profile.status == 'pending' %}
                            <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center align-items-center">
                                <div class="btn btn-warning btn-lg px-5 py-3" disabled>Application Under Review</div>
                            </div>
                        {% else %}
                            <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center align-items-center">
                                <a href="{% url 'affiliate:apply' %}" class="btn btn-primary btn-lg px-5 py-3">Reapply as Affiliate</a>
                                <a href="{% url 'directory:dashboard_home' %}" class="btn btn-outline-light btn-lg px-5 py-3">Go to Dashboard</a>
                            </div>
                        {% endif %}
                    {% else %}
                        <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center align-items-center">
                            <a href="{% url 'affiliate:apply' %}" class="btn btn-primary btn-lg px-5 py-3">Become Affiliate Now</a>
                            <a href="{% url 'directory:dashboard_home' %}" class="btn btn-outline-light btn-lg px-5 py-3">Go to Dashboard</a>
                        </div>
                    {% endif %}
                {% else %}
                    <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center align-items-center">
                        <a href="{% url 'account_signup' %}" class="btn btn-primary btn-lg px-5 py-3">Sign Up & Start Earning</a>
                        <a href="{% url 'account_login' %}" class="btn btn-outline-light btn-lg px-5 py-3">Already Member? Login</a>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<!-- Earning Potential Section -->
<section class="py-5 bg-gradient" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
    <div class="container">
        <div class="row text-center text-white">
            <div class="col-md-3 mb-4 mb-md-0">
                <div class="h2 fw-bold mb-0">20%</div>
                <p class="mb-0">Commission Rate</p>
            </div>
            <div class="col-md-3 mb-4 mb-md-0">
                <div class="h2 fw-bold mb-0">₹1000</div>
                <p class="mb-0">Per Premium Referral</p>
            </div>
            <div class="col-md-3 mb-4 mb-md-0">
                <div class="h2 fw-bold mb-0">No Limit</div>
                <p class="mb-0">Maximum Earnings</p>
            </div>
            <div class="col-md-3">
                <div class="h2 fw-bold mb-0">Monthly</div>
                <p class="mb-0">Payouts</p>
            </div>
        </div>
    </div>
</section>

<!-- How It Works Section -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">How Our Affiliate Program Works</h2>
            <p class="lead text-muted">Simple 4-step process to start earning unlimited income</p>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-3 col-md-6">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body p-4 text-center text-lg-center text-start">
                        <div class="bg-primary bg-opacity-10 rounded-circle p-4 d-inline-flex mb-4" style="width: 100px; height: 100px; align-items: center; justify-content: center;">
                            <i class="bi bi-person-plus-fill fs-1 text-primary"></i>
                        </div>
                        <div class="step-number">01</div>
                        <h5 class="fw-bold mb-3">Sign Up</h5>
                        <p class="text-muted">Create your free account and access the dashboard</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body p-4 text-center text-lg-center text-start">
                        <div class="bg-success bg-opacity-10 rounded-circle p-4 d-inline-flex mb-4" style="width: 100px; height: 100px; align-items: center; justify-content: center;">
                            <i class="bi bi-clipboard-check-fill fs-1 text-success"></i>
                        </div>
                        <div class="step-number">02</div>
                        <h5 class="fw-bold mb-3">Apply for Affiliate</h5>
                        <p class="text-muted">Fill the affiliate application from your dashboard</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body p-4 text-center text-lg-center text-start">
                        <div class="bg-warning bg-opacity-10 rounded-circle p-4 d-inline-flex mb-4" style="width: 100px; height: 100px; align-items: center; justify-content: center;">
                            <i class="bi bi-patch-check-fill fs-1 text-warning"></i>
                        </div>
                        <div class="step-number">03</div>
                        <h5 class="fw-bold mb-3">Get Approved</h5>
                        <p class="text-muted">Receive your unique affiliate code after approval</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body p-4 text-center text-lg-center text-start">
                        <div class="bg-info bg-opacity-10 rounded-circle p-4 d-inline-flex mb-4" style="width: 100px; height: 100px; align-items: center; justify-content: center;">
                            <i class="bi bi-cash-coin fs-1 text-info"></i>
                        </div>
                        <div class="step-number">04</div>
                        <h5 class="fw-bold mb-3">Start Earning</h5>
                        <p class="text-muted">Share your code and earn 20% on every premium subscription</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Earning Examples Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">Real Earning Examples</h2>
            <p class="lead text-muted">See how our top affiliates are making serious money</p>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-4">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-center mb-3">
                            <div class="bg-success rounded-circle p-3 me-3" style="width: 60px; height: 60px;">
                                <i class="bi bi-person-circle text-white fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-0">Raj Kumar</h5>
                                <small class="text-muted">Part-time Affiliate</small>
                            </div>
                        </div>
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="h4 fw-bold text-success mb-0">₹15,000</div>
                                <small class="text-muted">Monthly Earnings</small>
                            </div>
                            <div class="col-6">
                                <div class="h4 fw-bold text-primary mb-0">15</div>
                                <small class="text-muted">Referrals</small>
                            </div>
                        </div>
                        <hr class="my-3">
                        <p class="text-muted small mb-0">"I work just 2-3 hours daily and earn more than my full-time job!"</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="card border-0 shadow-sm border-warning">
                    <div class="badge bg-warning position-absolute top-0 start-50 translate-middle">
                        TOP PERFORMER
                    </div>
                    <div class="card-body p-4">
                        <div class="d-flex align-items-center mb-3">
                            <div class="bg-warning rounded-circle p-3 me-3" style="width: 60px; height: 60px;">
                                <i class="bi bi-person-circle text-white fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-0">Priya Sharma</h5>
                                <small class="text-muted">Full-time Affiliate</small>
                            </div>
                        </div>
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="h4 fw-bold text-success mb-0">₹45,000</div>
                                <small class="text-muted">Monthly Earnings</small>
                            </div>
                            <div class="col-6">
                                <div class="h4 fw-bold text-primary mb-0">45</div>
                                <small class="text-muted">Referrals</small>
                            </div>
                        </div>
                        <hr class="my-3">
                        <p class="text-muted small mb-0">"This has become my primary income source. Amazing opportunity!"</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-center mb-3">
                            <div class="bg-info rounded-circle p-3 me-3" style="width: 60px; height: 60px;">
                                <i class="bi bi-person-circle text-white fs-4"></i>
                            </div>
                            <div>
                                <h5 class="fw-bold mb-0">Amit Patel</h5>
                                <small class="text-muted">Business Owner</small>
                            </div>
                        </div>
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="h4 fw-bold text-success mb-0">₹28,000</div>
                                <small class="text-muted">Monthly Earnings</small>
                            </div>
                            <div class="col-6">
                                <div class="h4 fw-bold text-primary mb-0">28</div>
                                <small class="text-muted">Referrals</small>
                            </div>
                        </div>
                        <hr class="my-3">
                        <p class="text-muted small mb-0">"Perfect side income while running my own business!"</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Earning Calculator - Compact Mobile Version -->
        <div class="row justify-content-center mt-5">
            <div class="col-lg-10 col-xl-9">
                <div class="card border-0 shadow-lg">
                    <div class="card-body p-4 p-lg-5">
                        <h3 class="fw-bold text-center text-lg-center text-start mb-3 mb-lg-4">Calculate Your Earning Potential</h3>
                        
                        <!-- Mobile Compact Layout -->
                        <div class="d-lg-none">
                            <!-- Mobile Slider Section -->
                            <div class="mb-3">
                                <label class="form-label fw-bold mb-2">Monthly referrals?</label>
                                <input type="range" class="form-range mb-2" id="referralRange" min="1" max="100" value="10" oninput="calculateEarnings()">
                                <div class="d-flex justify-content-between small text-muted mb-3">
                                    <span>1</span>
                                    <span>100+</span>
                                </div>
                            </div>
                            
                            <!-- Mobile Results Grid -->
                            <div class="row g-2 mb-3">
                                <div class="col-4">
                                    <div class="bg-primary bg-opacity-10 rounded p-2 text-center">
                                        <div class="small text-primary">Referrals</div>
                                        <div class="fw-bold text-primary h6 mb-0">
                                            <span id="referralCount">10</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="bg-success bg-opacity-10 rounded p-2 text-center">
                                        <div class="small text-success">Monthly</div>
                                        <div class="fw-bold text-success h6 mb-0">
                                            ₹<span id="monthlyEarning">10,000</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="bg-warning bg-opacity-10 rounded p-2 text-center">
                                        <div class="small text-warning">Yearly</div>
                                        <div class="fw-bold text-warning h6 mb-0">
                                            ₹<span id="yearlyEarning">1,20,000</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Mobile Info -->
                            <div class="alert alert-info py-2 mb-3">
                                <small><i class="bi bi-info-circle me-1"></i>
                                <span id="referralCountText">10</span> × ₹1,000 = ₹<span id="monthlyEarningText">10,000</span>/month</small>
                            </div>
                            
                            <!-- Mobile CTA -->
                            {% if not user.is_authenticated %}
                                <div class="d-grid gap-2">
                                    <a href="{% url 'account_signup' %}" class="btn btn-primary">Start Earning Today</a>
                                    <a href="{% url 'account_login' %}" class="btn btn-outline-primary">Login & Apply</a>
                                </div>
                            {% elif not user.affiliate_profile %}
                                <div class="d-grid">
                                    <a href="{% url 'affiliate:apply' %}" class="btn btn-primary">Become Affiliate Now</a>
                                </div>
                            {% elif user.affiliate_profile.status == 'pending' %}
                                <div class="alert alert-warning py-2 mb-0">
                                    <small><i class="bi bi-clock me-1"></i>Application under review</small>
                                </div>
                            {% elif user.affiliate_profile.status == 'approved' %}
                                <div class="d-grid">
                                    <a href="{% url 'affiliate:dashboard' %}" class="btn btn-success">View Your Dashboard</a>
                                </div>
                            {% endif %}
                        </div>
                        
                        <!-- Desktop Layout (unchanged) -->
                        <div class="d-none d-lg-block">
                            <div class="row align-items-center g-4">
                                <div class="col-lg-5 mb-4 mb-lg-0">
                                    <label class="form-label fw-bold h5 mb-3">How many businesses can you refer monthly?</label>
                                    <input type="range" class="form-range mb-3" id="referralRangeDesktop" min="1" max="100" value="10" oninput="calculateEarningsDesktop()">
                                    <div class="d-flex justify-content-between mb-4">
                                        <small class="text-muted">1 Business</small>
                                        <small class="text-muted">100+ Businesses</small>
                                    </div>
                                    
                                    <!-- Visual Slider Value Display -->
                                    <div class="text-center">
                                        <div class="bg-primary bg-opacity-10 rounded-3 p-3 mb-3">
                                            <div class="h4 mb-0 text-primary">
                                                <span id="referralCountDesktop" class="fw-bold">10</span> Referrals/Month
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-lg-2 d-flex justify-content-center">
                                    <div class="text-center">
                                        <i class="bi bi-arrow-right text-primary fs-1"></i>
                                        <div class="small text-muted mt-2">Earnings</div>
                                    </div>
                                </div>
                                
                                <div class="col-lg-5">
                                    <div class="earnings-display">
                                        <!-- Monthly Earnings -->
                                        <div class="bg-success bg-opacity-10 rounded-3 p-4 mb-3 text-center">
                                            <div class="text-success mb-2">
                                                <i class="bi bi-calendar-month fs-2"></i>
                                            </div>
                                            <div class="h5 text-success mb-1">Monthly Earnings</div>
                                            <div class="h2 mb-0 text-success fw-bold">
                                                ₹<span id="monthlyEarningDesktop">10,000</span>
                                            </div>
                                        </div>
                                        
                                        <!-- Yearly Earnings -->
                                        <div class="bg-warning bg-opacity-10 rounded-3 p-4 text-center">
                                            <div class="text-warning mb-2">
                                                <i class="bi bi-calendar4-range fs-2"></i>
                                            </div>
                                            <div class="h5 text-warning mb-1">Yearly Earnings</div>
                                            <div class="h2 mb-0 text-warning fw-bold">
                                                ₹<span id="yearlyEarningDesktop">1,20,000</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Calculation Details -->
                            <div class="row mt-4">
                                <div class="col-12">
                                    <div class="bg-light rounded-3 p-4">
                                        <div class="row text-center g-3">
                                            <div class="col-md-3">
                                                <div class="h6 mb-1">Commission Rate</div>
                                                <div class="h4 text-primary mb-0">20%</div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="h6 mb-1">Premium Plan Cost</div>
                                                <div class="h4 text-info mb-0">₹5,000</div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="h6 mb-1">Per Referral Earning</div>
                                                <div class="h4 text-success mb-0">₹1,000</div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="h6 mb-1">Payout Threshold</div>
                                                <div class="h4 text-warning mb-0">₹5,000</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- CTA and Info -->
                            <div class="text-center mt-4">
                                <div class="alert alert-info d-inline-block mb-4">
                                    <i class="bi bi-info-circle me-2"></i>
                                    <strong>Calculation:</strong> <span id="referralCountTextDesktop">10</span> referrals × ₹1,000 commission = ₹<span id="monthlyEarningTextDesktop">10,000</span>/month
                                </div>
                                
                                {% if not user.is_authenticated %}
                                    <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                                        <a href="{% url 'account_signup' %}" class="btn btn-primary btn-lg px-5">Start Earning Today</a>
                                        <a href="{% url 'account_login' %}" class="btn btn-outline-primary btn-lg px-5">Login & Apply</a>
                                    </div>
                                {% elif not user.affiliate_profile %}
                                    <a href="{% url 'affiliate:apply' %}" class="btn btn-primary btn-lg px-5">Become Affiliate Now</a>
                                {% elif user.affiliate_profile.status == 'pending' %}
                                    <div class="alert alert-warning">
                                        <i class="bi bi-clock me-2"></i>Your application is under review
                                    </div>
                                {% elif user.affiliate_profile.status == 'approved' %}
                                    <a href="{% url 'affiliate:dashboard' %}" class="btn btn-success btn-lg px-5">View Your Dashboard</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Benefits Section -->
<section class="py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <h2 class="display-6 fw-bold mb-4">Why Join Our Affiliate Program?</h2>
                
                <div class="d-flex align-items-start mb-4">
                    <div class="bg-success rounded-circle p-2 me-3 mt-1" style="width: 40px; height: 40px;">
                        <i class="bi bi-percent text-white"></i>
                    </div>
                    <div>
                        <h5 class="fw-bold mb-2">Industry-Leading Commission</h5>
                        <p class="text-muted mb-0">Earn 20% commission - one of the highest rates in the industry</p>
                    </div>
                </div>
                
                <div class="d-flex align-items-start mb-4">
                    <div class="bg-primary rounded-circle p-2 me-3 mt-1" style="width: 40px; height: 40px;">
                        <i class="bi bi-infinity text-white"></i>
                    </div>
                    <div>
                        <h5 class="fw-bold mb-2">No Earning Limits</h5>
                        <p class="text-muted mb-0">Unlimited earning potential with no monthly or yearly caps</p>
                    </div>
                </div>
                
                <div class="d-flex align-items-start mb-4">
                    <div class="bg-info rounded-circle p-2 me-3 mt-1" style="width: 40px; height: 40px;">
                        <i class="bi bi-calendar-month text-white"></i>
                    </div>
                    <div>
                        <h5 class="fw-bold mb-2">Monthly Payouts</h5>
                        <p class="text-muted mb-0">Reliable monthly payments directly to your bank account</p>
                    </div>
                </div>
                
                <div class="d-flex align-items-start mb-4">
                    <div class="bg-warning rounded-circle p-2 me-3 mt-1" style="width: 40px; height: 40px;">
                        <i class="bi bi-graph-up text-white"></i>
                    </div>
                    <div>
                        <h5 class="fw-bold mb-2">Easy to Promote</h5>
                        <p class="text-muted mb-0">High-demand service that businesses actually need</p>
                    </div>
                </div>
                
                <div class="d-flex align-items-start">
                    <div class="bg-danger rounded-circle p-2 me-3 mt-1" style="width: 40px; height: 40px;">
                        <i class="bi bi-headset text-white"></i>
                    </div>
                    <div>
                        <h5 class="fw-bold mb-2">Dedicated Support</h5>
                        <p class="text-muted mb-0">Personal affiliate manager to help you succeed</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-6">
                <div class="card border-0 shadow-lg">
                    <div class="card-body p-5">
                        <h4 class="fw-bold mb-4">Commission Structure</h4>
                        
                        <div class="table-responsive">
                            <table class="table table-borderless">
                                <thead class="bg-light">
                                    <tr>
                                        <th>Referrals/Month</th>
                                        <th>Commission Rate</th>
                                        <th>Monthly Earning</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>1-10</strong></td>
                                        <td><span class="badge bg-success">20%</span></td>
                                        <td><strong>₹1,000 - ₹10,000</strong></td>
                                    </tr>
                                    <tr>
                                        <td><strong>11-25</strong></td>
                                        <td><span class="badge bg-success">20%</span></td>
                                        <td><strong>₹11,000 - ₹25,000</strong></td>
                                    </tr>
                                    <tr>
                                        <td><strong>26-50</strong></td>
                                        <td><span class="badge bg-success">20%</span></td>
                                        <td><strong>₹26,000 - ₹50,000</strong></td>
                                    </tr>
                                    <tr class="table-warning">
                                        <td><strong>50+</strong></td>
                                        <td><span class="badge bg-warning">20%+</span></td>
                                        <td><strong>₹50,000+</strong></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle me-2"></i>
                            <strong>Bonus Opportunities:</strong> Top performers may qualify for additional bonuses and incentives.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Requirements Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center text-lg-center text-start mb-5">
            <h2 class="display-5 fw-bold">Affiliate Requirements</h2>
            <p class="lead text-muted">Simple requirements to get started</p>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body p-4 text-center text-lg-center text-start">
                        <i class="bi bi-person-check-fill text-primary fs-1 mb-3"></i>
                        <h5 class="fw-bold mb-3">Basic Requirements</h5>
                        <ul class="list-unstyled text-start">
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Age 18 or above</li>
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Valid Indian bank account</li>
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Basic KYC documents</li>
                            <li><i class="bi bi-check-circle-fill text-success me-2"></i>Active email & phone</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body p-4 text-center text-lg-center text-start">
                        <i class="bi bi-file-earmark-text-fill text-success fs-1 mb-3"></i>
                        <h5 class="fw-bold mb-3">Documents Needed</h5>
                        <ul class="list-unstyled text-start">
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Aadhar Card</li>
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>PAN Card</li>
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Bank Account Details</li>
                            <li><i class="bi bi-check-circle-fill text-success me-2"></i>Cancelled Cheque</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body p-4 text-center text-lg-center text-start">
                        <i class="bi bi-graph-up-arrow text-info fs-1 mb-3"></i>
                        <h5 class="fw-bold mb-3">Success Tips</h5>
                        <ul class="list-unstyled text-start">
                            <li class="mb-2"><i class="bi bi-lightbulb-fill text-warning me-2"></i>Target local businesses</li>
                            <li class="mb-2"><i class="bi bi-lightbulb-fill text-warning me-2"></i>Use social media effectively</li>
                            <li class="mb-2"><i class="bi bi-lightbulb-fill text-warning me-2"></i>Focus on service providers</li>
                            <li><i class="bi bi-lightbulb-fill text-warning me-2"></i>Follow up consistently</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-5 bg-primary text-white">
    <div class="container text-center">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <h2 class="display-5 fw-bold mb-4">Start Your Affiliate Journey Today</h2>
                <p class="lead mb-4">Join hundreds of successful affiliates already earning with BizDirectory</p>
                
                {% if user.is_authenticated %}
                    {% if user.affiliate_profile %}
                        {% if user.affiliate_profile.status == 'approved' %}
                            <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center align-items-center">
                                <a href="{% url 'affiliate:dashboard' %}" class="btn btn-light btn-lg px-5 py-3">
                                    <i class="bi bi-bar-chart me-2"></i>View Affiliate Dashboard
                                </a>
                                <a href="{% url 'affiliate:referrals' %}" class="btn btn-outline-light btn-lg px-5 py-3">
                                    My Referrals
                                </a>
                            </div>
                        {% elif user.affiliate_profile.status == 'pending' %}
                            <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center align-items-center">
                                <div class="alert alert-warning d-inline-block">
                                    <i class="bi bi-clock me-2"></i>Your affiliate application is under review
                                </div>
                            </div>
                        {% else %}
                            <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center align-items-center">
                                <a href="{% url 'affiliate:apply' %}" class="btn btn-light btn-lg px-5 py-3">
                                    <i class="bi bi-person-plus me-2"></i>Reapply as Affiliate
                                </a>
                            </div>
                        {% endif %}
                    {% else %}
                        <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center align-items-center">
                            <a href="{% url 'affiliate:apply' %}" class="btn btn-light btn-lg px-5 py-3">
                                <i class="bi bi-person-plus me-2"></i>Apply as Affiliate
                            </a>
                            <a href="{% url 'directory:dashboard_home' %}" class="btn btn-outline-light btn-lg px-5 py-3">
                                Go to Dashboard
                            </a>
                        </div>
                    {% endif %}
                {% else %}
                    <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center align-items-center">
                        <a href="{% url 'account_signup' %}" class="btn btn-light btn-lg px-5 py-3">
                            <i class="bi bi-person-plus me-2"></i>Sign Up & Apply
                        </a>
                        <a href="{% url 'account_login' %}" class="btn btn-outline-light btn-lg px-5 py-3">
                            <i class="bi bi-box-arrow-in-right me-2"></i>Login Existing Account
                        </a>
                    </div>
                {% endif %}
                
                <p class="mt-4 mb-0 opacity-75">
                    <i class="bi bi-shield-check me-2"></i>
                    Free to join • Quick approval • Start earning immediately
                </p>
            </div>
        </div>
    </div>
</section>

<div class="sticky-cta-bottom">
    <div class="d-flex gap-2">
        {% if user.is_authenticated %}
            {% if not user.affiliate_profile %}
            <a href="{% url 'affiliate:apply' %}" class="btn btn-success flex-fill">
                <i class="bi bi-person-plus me-1"></i>
                <span>Apply Now</span>
            </a>
            <a href="{% url 'directory:dashboard_home' %}" class="btn btn-outline-primary flex-fill">
                <i class="bi bi-speedometer2 me-1"></i>
                <span>Dashboard</span>
            </a>
            {% elif user.affiliate_profile.status == 'approved' %}
            <a href="{% url 'affiliate:dashboard' %}" class="btn btn-primary flex-fill">
                <i class="bi bi-bar-chart me-1"></i>
                <span>My Earnings</span>
            </a>
            <a href="{% url 'affiliate:referrals' %}" class="btn btn-outline-primary flex-fill">
                <i class="bi bi-people me-1"></i>
                <span>Referrals</span>
            </a>
            {% else %}
            <div class="btn btn-warning flex-fill disabled">
                <i class="bi bi-clock me-1"></i>
                <span>Under Review</span>
            </div>
            <a href="{% url 'directory:dashboard_home' %}" class="btn btn-outline-primary flex-fill">
                <i class="bi bi-speedometer2 me-1"></i>
                <span>Dashboard</span>
            </a>
            {% endif %}
        {% else %}
        <a href="{% url 'account_signup' %}" class="btn btn-primary flex-fill">
            <i class="bi bi-person-plus me-1"></i>
            <span>Join & Earn</span>
        </a>
        <a href="{% url 'account_login' %}" class="btn btn-outline-primary flex-fill">
            <i class="bi bi-box-arrow-in-right me-1"></i>
            <span>Login</span>
        </a>
        {% endif %}
    </div>
</div>

<style>
.step-number {
    position: absolute;
    top: -10px;
    right: 20px;
    background: linear-gradient(45deg, #0d6efd, #0dcaf0);
    color: white;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 0.9rem;
}

.card {
    position: relative;
}

/* Enhanced Mobile Button Centering */
.btn-container,
.d-flex.flex-column.flex-sm-row {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
    justify-content: center;
}

@media (min-width: 576px) {
    .btn-container,
    .d-flex.flex-column.flex-sm-row {
        flex-direction: row;
        gap: 1.5rem;
    }
}

/* Mobile button improvements with perfect centering */
@media (max-width: 575.98px) {
    .btn-lg {
        width: 100%;
        max-width: 280px;
        padding: 1rem 2rem !important;
        font-size: 1rem !important;
        margin: 0 auto; /* Center the button horizontally */
        display: block;
        text-align: center;
    }
    
    /* Ensure button containers are centered */
    .d-flex.flex-column.flex-sm-row {
        align-items: center !important;
        justify-content: center !important;
        text-align: center;
        width: 100%;
    }
    
    /* Center the entire button group */
    .hero-section .container,
    .py-5.bg-primary .container {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    }
    
    /* Ensure proper spacing between stacked buttons */
    .d-flex.flex-column .btn + .btn {
        margin-top: 0 !important;
    }
    
    /* Hero section mobile adjustments */
    .hero-section .container {
        padding-left: 1rem;
        padding-right: 1rem;
    }
    
    .hero-section h1 {
        font-size: 1.75rem !important;
        line-height: 1.3;
        margin-bottom: 1rem;
        text-align: center;
    }
    
    .hero-section .lead {
        font-size: 1rem !important;
        margin-bottom: 2rem;
        text-align: center;
    }
    
    /* CTA section mobile adjustments */
    .py-5.bg-primary h2 {
        font-size: 1.5rem !important;
        line-height: 1.3;
        margin-bottom: 1rem;
        text-align: center;
    }
    
    .py-5.bg-primary .lead {
        font-size: 0.95rem !important;
        margin-bottom: 2rem;
        text-align: center;
    }
    
    /* Center the text content as well */
    .col-lg-8 {
        text-align: center;
    }
}

/* Tablet adjustments */
@media (min-width: 576px) and (max-width: 767.98px) {
    .btn-lg {
        padding: 0.875rem 1.75rem !important;
        font-size: 0.95rem !important;
    }
}

/* Ensure buttons don't break on very small screens */
@media (max-width: 320px) {
    .btn-lg {
        padding: 0.875rem 1.5rem !important;
        font-size: 0.9rem !important;
        max-width: 260px;
        margin: 0 auto;
    }
    
    .hero-section h1 {
        font-size: 1.5rem !important;
    }
    
    .py-5.bg-primary h2 {
        font-size: 1.3rem !important;
    }
}

/* Enhanced Calculator Styling */
.earnings-display {
    transition: all 0.3s ease;
}

.earnings-display .bg-success,
.earnings-display .bg-warning {
    transition: transform 0.15s ease;
    border: 1px solid rgba(255,255,255,0.2);
}

/* Custom Range Slider */
#referralRange {
    height: 8px;
    border-radius: 5px;
    background: linear-gradient(to right, #0d6efd 0%, #0d6efd 50%, #dee2e6 50%, #dee2e6 100%);
    outline: none;
    -webkit-appearance: none;
    appearance: none;
}

#referralRange::-webkit-slider-thumb {
    appearance: none;
    height: 20px;
    width: 20px;
    border-radius: 50%;
    background: #0d6efd;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(13, 110, 253, 0.3);
}

#referralRange::-moz-range-thumb {
    height: 20px;
    width: 20px;
    border-radius: 50%;
    background: #0d6efd;
    cursor: pointer;
    border: none;
    box-shadow: 0 2px 6px rgba(13, 110, 253, 0.3);
}

/* Responsive adjustments for calculator */
@media (max-width: 991.98px) {
    .col-lg-2 {
        display: none !important;
    }
    
    .earnings-display .bg-success,
    .earnings-display .bg-warning {
        padding: 2rem 1.5rem !important;
    }
    
    .earnings-display .h2 {
        font-size: 1.75rem;
    }
}

@media (max-width: 767.98px) {
    .calculator-section .card-body {
        padding: 2rem 1.5rem !important;
    }
    
    .bg-light.rounded-3 .row {
        text-align: center;
    }
    
    .bg-light.rounded-3 .col-md-3 {
        margin-bottom: 1rem;
    }
    
    .earnings-display .bg-success,
    .earnings-display .bg-warning {
        padding: 1.5rem 1rem !important;
        margin-bottom: 1rem !important;
    }
    
    .earnings-display .h2 {
        font-size: 1.5rem;
    }
    
    .earnings-display .h5 {
        font-size: 1rem;
    }
}

@media (max-width: 575.98px) {
    .card-body {
        padding: 1.5rem 1rem !important;
    }
    
    .h3.fw-bold {
        font-size: 1.5rem !important;
    }
    
    .btn-lg.px-5 {
        padding: 0.75rem 2rem !important;
        font-size: 1rem !important;
    }
}
</style>

<script>
function calculateEarnings() {
    const referrals = document.getElementById('referralRange').value;
    const monthlyEarning = referrals * 1000; // ₹1000 per referral
    const yearlyEarning = monthlyEarning * 12;
    
    // Update main display
    document.getElementById('referralCount').textContent = referrals;
    document.getElementById('monthlyEarning').textContent = monthlyEarning.toLocaleString();
    document.getElementById('yearlyEarning').textContent = yearlyEarning.toLocaleString();
    
    // Update calculation text
    document.getElementById('referralCountText').textContent = referrals;
    document.getElementById('monthlyEarningText').textContent = monthlyEarning.toLocaleString();
}

// Initialize calculator and add smooth animations
document.addEventListener('DOMContentLoaded', function() {
    calculateEarnings();
    
    // Add smooth range slider styling
    const slider = document.getElementById('referralRange');
    slider.addEventListener('input', function() {
        const value = (this.value - this.min) / (this.max - this.min) * 100;
        this.style.background = `linear-gradient(to right, #0d6efd 0%, #0d6efd ${value}%, #dee2e6 ${value}%, #dee2e6 100%)`;
        
        // Add pulse animation to earnings display
        const monthlyCard = document.querySelector('.bg-success');
        const yearlyCard = document.querySelector('.bg-warning');
        
        monthlyCard.style.transform = 'scale(1.02)';
        yearlyCard.style.transform = 'scale(1.02)';
        
        setTimeout(() => {
            monthlyCard.style.transform = 'scale(1)';
            yearlyCard.style.transform = 'scale(1)';
        }, 150);
    });
    
    // Initialize slider styling
    const value = (slider.value - slider.min) / (slider.max - slider.min) * 100;
    slider.style.background = `linear-gradient(to right, #0d6efd 0%, #0d6efd ${value}%, #dee2e6 ${value}%, #dee2e6 100%)`;
});
</script>
{% endblock %}