<!-- Desktop Filter Form -->
<form id="desktop-filter-form" action="{% url 'directory:listings' %}" method="get">
    {% if current_filters.query %}
    <input type="hidden" name="query" value="{{ current_filters.query }}">
    {% endif %}
    
    <!-- Location Search -->
    <div class="mb-3">
        <label class="form-label fw-bold d-flex align-items-center justify-content-between">
            <span><i class="bi bi-geo-alt me-1"></i>Location</span>
            <i class="bi bi-question-circle text-muted filter-tooltip" 
               data-bs-toggle="tooltip" 
               data-bs-placement="left"
               title="Search by area, locality, or landmark."></i>
        </label>
        <div class="position-relative">
            <input type="text" 
                   class="form-control form-control-sm" 
                   id="desktopLocationSearch" 
                   name="location"
                   placeholder="Search by area, locality..."
                   value="{{ current_filters.location|default:'' }}"
                   autocomplete="off">
            <div class="search-suggestions" id="desktopLocationSuggestions"></div>
            
            <!-- Hidden fields for Google Places data -->
            <input type="hidden" name="lat" id="desktopLat" value="{{ current_filters.lat|default:'' }}">
            <input type="hidden" name="lng" id="desktopLng" value="{{ current_filters.lng|default:'' }}">
            <input type="hidden" name="radius" id="desktopRadius" value="{{ current_filters.radius|default:'50' }}">
        </div>
    </div>
    
    <!-- Category Filter with Auto-suggestions -->
    <div class="mb-3">
        <label for="desktopCategorySearch" class="form-label">
            <span>Category</span>
            <a href="{% url 'directory:categories' %}" class="small text-primary ms-2" style="text-decoration: none;">
                View All
            </a>
        </label>
        <div class="position-relative">
            <input type="text" 
                   class="form-control form-control-sm category-search-input" 
                   id="desktopCategorySearch" 
                   placeholder="Search categories..."
                   autocomplete="off">
            <div class="category-suggestions" id="desktopCategorySuggestions"></div>
        </div>
        
        <!-- Selected Categories Display -->
        <div class="selected-categories-container mt-2" id="desktopSelectedCategories">
            <!-- Selected category tags will appear here -->
        </div>
        
        <!-- Hidden input to store selected category IDs -->
        <input type="hidden" name="category" id="desktopCategoryInput" value="{{ current_filters.category|default:'' }}">
    </div>
    
    <!-- Ratings Dropdown -->
    <div class="mb-3">
        <label for="desktopRatingSelect" class="form-label fw-bold d-flex align-items-center justify-content-between">
            <span><i class="bi bi-star me-1"></i>Ratings</span>
            <i class="bi bi-question-circle text-muted filter-tooltip" 
               data-bs-toggle="tooltip" 
               data-bs-placement="left"
               title="Filter businesses by minimum star ratings."></i>
        </label>
        <select class="form-select form-select-sm desktop-filter-change" id="desktopRatingSelect" name="rating">
            <option value="">Any Rating</option>
            <option value="5" {% if current_filters.rating == '5' %}selected{% endif %}>
                ★★★★★ 5 Stars Only
            </option>
            <option value="4" {% if current_filters.rating == '4' %}selected{% endif %}>
                ★★★★☆ 4 Stars Only
            </option>
            <option value="3" {% if current_filters.rating == '3' %}selected{% endif %}>
                ★★★☆☆ 3 Stars Only
            </option>
            <option value="2" {% if current_filters.rating == '2' %}selected{% endif %}>
                ★★☆☆☆ 2 Stars Only
            </option>
            <option value="1" {% if current_filters.rating == '1' %}selected{% endif %}>
                ★☆☆☆☆ 1 Star Only
            </option>
        </select>
    </div>
    
    <!-- Verification Status -->
    <div class="mb-3">
        <label for="desktopVerificationSelect" class="form-label fw-bold d-flex align-items-center justify-content-between">
            <span><i class="bi bi-shield-check me-1"></i>Verification</span>
            <i class="bi bi-question-circle text-muted filter-tooltip" 
               data-bs-toggle="tooltip" 
               data-bs-placement="left"
               title="Filter by business verification status."></i>
        </label>
        <select class="form-select form-select-sm desktop-filter-change" id="desktopVerificationSelect" name="verification">
            <option value="">All Businesses</option>
            <option value="gst" {% if current_filters.verification == 'gst' %}selected{% endif %}>GST Verified Only</option>
            <option value="kyc" {% if current_filters.verification == 'kyc' %}selected{% endif %}>KYC Completed Only</option>
            <option value="both" {% if current_filters.verification == 'both' %}selected{% endif %}>Both GST & KYC</option>
        </select>
    </div>
    
    <!-- Action Buttons -->
    <div class="d-grid gap-2">
        <button type="submit" class="btn btn-primary btn-sm">
            <i class="bi bi-funnel me-2"></i>Apply Filters
        </button>
        <a href="{% url 'directory:listings' %}" class="btn btn-outline-secondary btn-sm">
            <i class="bi bi-x-circle me-2"></i>Clear All
        </a>
    </div>
</form>